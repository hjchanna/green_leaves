<div class="index-content-header">
</div>

<div class="index-content-body">
    <div class="col-xs-8 background-light">
        <div class="row" style="display: flex; flex-flow: column; height: calc(100vh - 52px);">
            <div class="col-xs-12 " style="flex: 0 0 auto;">

                <table> 
                    <col style="width: 40%"/>
                    <col style="width: 20%"/>
                    <col style="width: 40%"/>
                    <col/>
                    <thead class="background-dark">
                        <tr>
                            <th>
                                <input style="margin-top: 5px" smart-input="text" class="form-control" ng-model="model.data.routeOfficer" uib-typeahead="routeOfficer.indexNo as (routeOfficer.indexNo + '-' + routeOfficer.name) for routeOfficer in model.routeOfficers|filter:{name:$viewValue}|limitTo:10"  typeahead-input-formatter="model.routeOfficerLabel($model)" ng-disabled="ui.mode !== 'EDIT'">
                            </th>
                            <th></th>
                            <th>
                                <input id="date" style="margin-top: 5px" class="form-control" smart-input="date"  ng-model="model.data.date">
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="col-xs-12 smart-scroll-y" style="height: calc(100% - 95px);">
                <uib-tabset active="indextab">
                    <uib-tab heading="ROUTE OFFICER TEA ISSUE" index="0">
                        <table class="table">
                            <col style="width: 10%"/>
                            <col style="width: 25%"/>
                            <col style="width: 25%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col/>
                            <tbody>                       
                                <tr>
                                    <th class="text-left">#</th>
                                    <th class="text-left">ROUTE OFFICER</th>
                                    <th class="text-left">TEA GRADE</th>
                                    <th class="text-left">U.PRICE</th>
                                    <th class="text-left">QTY</th>
                                    <th class="text-left">VALUE</th>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table-hover">
                            <col style="width: 10%"/>
                            <col style="width: 25%"/>
                            <col style="width: 25%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col/>
                            <tbody >                       
                                <tr ng-class="ui.selectedRequest === teaIssueDate.indexNo ? 'selected' : ''" ng-repeat="teaIssueDate in model.pendingTeaIssueRequest|filter:{type:'OFFICER_TEA_ISSUE'}" ng-click="ui.selectRequest(teaIssueDate.indexNo, $index);">
                                    <td class="text-right"><label class="label label-primary">{{teaIssueDate.number|fixedLength:4}}</label></td>
                                    <td class="text-left"><label class="label label-primary">{{model.routeOfficer(teaIssueDate.routeOfficer).index}}</label>{{model.routeOfficer(teaIssueDate.routeOfficer).name}}</td>
                                    <td class="text-left">{{model.teaGrade(teaIssueDate.teaGrade).name}}</td>
                                    <td class="text-right">{{teaIssueDate.price| number:2}}</td>
                                    <td class="text-right">{{teaIssueDate.qty}}</td>
                                    <td class="text-right">{{teaIssueDate.price * teaIssueDate.qty| number:2}}</td>
                                </tr>
                            </tbody>
                        </table> 
                    </uib-tab>
                    <uib-tab heading="DIRECT TEA ISSUE" index="1">
                        <table class="table">
                            <col style="width: 25%"/>
                            <col style="width: 20%"/>
                            <col style="width: 15%"/>
                            <col style="width: 10%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col/>
                            <tbody >                       
                                <tr style="height: 40px">
                                    <th>SUPPLIER</th>
                                    <th>TEA GRADE</th>
                                    <th>U.PRICE</th>
                                    <th>QTY</th>
                                    <th>VALUE</th>
                                    <th>&nbsp;</th>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table-hover">
                            <col style="width: 25%"/>
                            <col style="width: 20%"/>
                            <col style="width: 15%"/>
                            <col style="width: 10%"/>
                            <col style="width: 15%"/>
                            <col style="width: 15%"/>
                            <col/>
                            <tbody >                       
                                <tr style="height: 40px" ng-repeat="teaIssueDate in model.pendingTeaIssueRequest|filter:{type:'DIRECT_TEA_ISSUE'}">
                                    <td class="text-left"><label class="label label-primary">{{model.client(teaIssueDate.client).clientNumber | fixedLength:4}}</label>{{model.client(teaIssueDate.client).name}}</td>
                                    <td class="text-left"><label class="label label-default">{{model.teaGrade(teaIssueDate.teaGrade).indexNo | fixedLength:4}}</label>{{model.teaGrade(teaIssueDate.teaGrade).name}}</td>
                                    <td class="text-right">{{teaIssueDate.price| number:2}}</td>
                                    <td class="text-right">{{teaIssueDate.qty}}</td>
                                    <td class="text-right">{{teaIssueDate.price * teaIssueDate.qty| number:2}}</td>
                                    <td class="text-right">{{teaIssueDate.number|fixedLength:4}}</td>
                                    <td>
                                        <a class="btn btn-success" ng-click="ui.editDetail($index);"><span class="glyphicon glyphicon-ok"></span></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </uib-tab>
                </uib-tabset>
            </div>
            <!--            <div class="placeholder col-xs-12 animation-fade" style="height: calc(100% - 95px);">
                            <h1>NO DISPLAY TEA ISSUE REQUEST :(</h1>
                        </div>-->
            <div class="col-xs-12">
                <table>
                    <col style="width: 30%;"/>
                    <col style="width: 70%;"/>
                    <thead class="background-dark">
                        <tr>
                            <td>TOTAL</td>
                            <td class="text-right">{{model.itemTotal() | number:2}}</td>
                        </tr>
                    </thead>
                </table>
            </div>

        </div>
    </div>
    <div class="col-xs-4 background-dark border-dark-left">
        <div class="row" style="display: flex; flex-flow: column; height: calc(100vh - 51px);">
            <div class="col-xs-12">
                <table>
                    <col style="width: 40%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 15%;"/>
                    <col />
                    <thead>
                        <tr>
                            <th>DESCRIPTION</th>
                            <th class="text-right">DEBIT</th>
                            <th class="text-right">CREDIT</th>
                            <th>&nbsp;</th>
                        </tr>
                    </thead>
                </table>
            </div>

            <div class="col-xs-12 smart-scroll-y" style="height: calc(100% - 305px);">
                <table>
                    <col style="width: 40%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 15%;"/>
                    <tbody>
                        <tr ng-repeat="clientHistory in model.clientHistory">
                            <td>{{clientHistory[0]}}</td>
                            <td class="text-right" >{{clientHistory[2]|number:2}}</td>
                            <td class="text-right" >{{clientHistory[1]|number:2}}</td>
                            <td><a class="btn btn-primary"><span class="glyphicon glyphicon-paste"></span></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-xs-12">
                <table>
                    <col style="width: 40%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 25%;"/>
                    <col style="width: 15%;"/>
                    <col />

                    <tbody>
                        <tr class="text-bold">
                            <td>Total</td>
                            <td class="text-right">{{model.totalCreditAndDebit.totalDebit|number:2}}</td>
                            <td class="text-right">{{model.totalCreditAndDebit.totalCradit|number:2}}</td>
                            <td></td>
                        </tr>
                        <tr class="text-bold">
                            <td>Balance</td>
                            <td class="text-right">{{model.totalCreditAndDebit.totalDebit - model.totalCreditAndDebit.totalCradit|number:2}}</td>
                            <td class="text-right">-</td>      
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-xs-12" style="margin-top: 10px;height: 170px;">
                <canvas id="line" class="chart chart-line ng-isolate-scope" chart-dataset-override="datasetOverride" chart-data="model.chartDetails.chartData" chart-labels="model.chartDetails.chartDateList" chart-colors="colors" chart-series="series" chart-options="options"></canvas>
            </div>
        </div>
    </div>
</div>
<div class="fab-container">
    <a class="fab fab-danger" ng-show="model.fertilizerItems.length" ng-click="ui.reject();"><i class="glyphicon glyphicon-edit"></i></a>
    <a class="fab fab-lg fab-primary" ng-show="model.fertilizerItems.length" ng-click="ui.approve();"><i class="glyphicon glyphicon-ok"></i></a>
    <a class="fab fab-lg fab-primary" fab-show="ui.mode ==='EDIT'" ng-click="ui.save();"><i class="glyphicon glyphicon-floppy-save"></i></a>
    <a class="fab fab-lg fab-primary" fab-show="ui.mode ==='IDEAL'" ng-click="ui.new();"><i class="glyphicon glyphicon-plus"></i></a>
</div>