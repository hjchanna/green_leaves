<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 5.6.2.final using JasperReports Library version 5.6.1  -->
<!-- 2017-02-11T16:38:37 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="advance" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="f47bc3d3-ba12-4f69-8bdb-c090a75798bb">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter "/>
	<parameter name="TO_DATE" class="java.util.Date">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<parameter name="FROM_DATE" class="java.util.Date">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<parameter name="CURRENT_BRANCH" class="java.lang.Integer"/>
	<parameter name="ROUTE" class="java.lang.Integer"/>
	<queryString language="SQL">
		<![CDATA[select
	concat('[', m_route.index_no, '] ', m_route.name) as route_res,
	concat(year(t_client_advance_request_detail.as_at_date), '-', ucase(monthname(t_client_advance_request_detail.as_at_date))) as month_res,
	sum(t_client_advance_request_detail.amount) as amount_res
from
	t_client_advance_request
	left join t_client_advance_request_detail on t_client_advance_request_detail.client_advance_request = t_client_advance_request.index_no
	left join m_client on m_client.index_no = t_client_advance_request_detail.`client`
	left join m_route on m_route.index_no = m_client.route
where
	t_client_advance_request.branch =  $P{CURRENT_BRANCH} or $P{CURRENT_BRANCH}  is null
	and (m_route.index_no = $P{ROUTE}   or $P{ROUTE}  is null)
	and (t_client_advance_request_detail.as_at_date >=  $P{TO_DATE}  or $P{TO_DATE}   is null)
	and (t_client_advance_request_detail.as_at_date <=  $P{FROM_DATE}  or $P{FROM_DATE}   is null)
	and t_client_advance_request_detail.`status` = 'APPROVED'
group by
	route_res, month_res
order by
	route_res, month_res]]>
	</queryString>
	<field name="route_res" class="java.lang.String"/>
	<field name="month_res" class="java.lang.String"/>
	<field name="amount_res" class="java.math.BigDecimal"/>
	<variable name="indexNo" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{route_res}]]></variableExpression>
		<initialValueExpression><![CDATA[$F{route_res}]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="82" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="299" height="49" uuid="2d7b9cac-70e4-45bf-9a49-4da9e3eae4c0"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="26" isBold="true"/>
				</textElement>
				<text><![CDATA[NEW HOPEWELL]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="50" width="180" height="30" uuid="b60d1b45-213d-4c61-ab80-a1776ea303a0"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Advance Detail Report]]></text>
			</staticText>
			<textField>
				<reportElement x="300" y="0" width="100" height="30" uuid="58d9173b-9cf3-49d5-aaef-016d67ceaad2"/>
				<textFieldExpression><![CDATA[$P{TO_DATE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="300" y="30" width="100" height="30" uuid="70affcde-03e5-4f5d-bbfe-98269b3ca6df"/>
				<textFieldExpression><![CDATA[$P{FROM_DATE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="410" y="0" width="100" height="30" uuid="197c1425-4be1-4073-a2cc-db0118394232"/>
				<textFieldExpression><![CDATA[$P{ROUTE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="410" y="30" width="100" height="30" uuid="931269b1-c8e1-40f8-8ccd-f32e811bf604"/>
				<textFieldExpression><![CDATA[$P{CURRENT_BRANCH}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="79" height="30" uuid="27bdd7c3-bd89-4947-8a0b-d758ecc911c5"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Date :]]></text>
			</staticText>
			<textField pattern="yyyy-MM-dd">
				<reportElement x="80" y="0" width="140" height="30" uuid="25d78750-e920-4caa-94f3-79a81cb13483"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="30" splitType="Stretch">
			<staticText>
				<reportElement x="59" y="0" width="220" height="30" uuid="de11cfca-18a7-43c5-a40d-ee1a0ef96a69"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Route]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="59" height="30" uuid="ef3c3c6d-41ca-4c5c-bc5a-b7d67c965583"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[#]]></text>
			</staticText>
			<staticText>
				<reportElement x="280" y="0" width="190" height="30" uuid="edca20e4-ca2e-4b0d-b239-1eaf9de80091"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Month]]></text>
			</staticText>
			<staticText>
				<reportElement x="470" y="0" width="83" height="30" uuid="a92a0a6f-6471-4411-91a9-267833c039b2"/>
				<box rightPadding="5"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="32" splitType="Stretch">
			<textField>
				<reportElement x="59" y="0" width="220" height="30" uuid="9aeafcc1-b881-45d8-9f1c-dd7134469947"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{route_res}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="280" y="0" width="190" height="30" uuid="da69640a-8d11-468f-bab1-2f4d3eeeef61"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{month_res}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="470" y="0" width="83" height="30" uuid="dfb75ab6-d44e-4992-9d29-9957eba87edf"/>
				<box rightPadding="4"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{amount_res}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="59" height="30" uuid="86969258-0d38-4043-b5c5-6730da4cddb9"/>
				<box leftPadding="5"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{indexNo}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
